# 2025-11-02 작업 내역

## 📋 완료된 작업

### Phase 1: 프로젝트 세팅 ✅

#### 1. Vite + React 프로젝트 초기화
- Vite를 이용한 React 프로젝트 생성
- React 19.1.1 버전 사용
- 패키지 설치 완료

#### 2. 패키지 설정
**설치된 주요 패키지:**
- `react`: ^19.1.1
- `react-dom`: ^19.1.1
- `@supabase/supabase-js`: ^2.45.4 (Phase 4에서 사용)
- `gh-pages`: ^6.2.0 (GitHub Pages 배포용)

**package.json 스크립트:**
```json
{
  "predeploy": "npm run build",
  "deploy": "gh-pages -d dist"
}
```

#### 3. Vite 설정
- `vite.config.js`에 GitHub Pages용 base URL 설정: `/MyWedding/`
- 배포 시 리포지토리명과 일치해야 함

#### 4. 프로젝트 폴더 구조 생성
```
/src
  /components
    - Navigation.jsx / .css
    - PetalAnimation.jsx / .css
    - IntroSection.jsx / .css
    - MainSection.jsx / .css
    - GallerySection.jsx / .css
    - MapSection.jsx / .css
    - MessageBoard.jsx / .css
    - Footer.jsx / .css
  /hooks (Phase 4에서 사용)
  /utils (Phase 3에서 사용)
  /styles
    - globals.css
  /assets
    - /images
  - App.jsx
  - main.jsx
  - index.css
```

#### 5. HTML 메타 태그 설정
- 한국어 설정 (`lang="ko"`)
- 모바일 최적화 viewport 설정
- SEO 메타 태그 추가
- Open Graph 태그 추가 (카카오톡 공유용)

---

### Phase 2: UI 컴포넌트 개발 ✅

#### 1. 디자인 시스템 구축 (globals.css)
**색상 시스템:**
```css
--bg-white: #FFFFFF
--bg-ivory: #F9F5F0
--point-pink: #FADADD (살구빛 핑크)
--point-green: #B6C8A9 (그리너리)
--text-dark: #333333
--text-gray: #666666
--text-light: #999999
```

**폰트 시스템:**
- 타이틀: Playfair Display / Noto Serif KR
- 본문: Pretendard / Noto Sans KR

**반응형 레이아웃:**
- 최대 너비: 480px (모바일 최적화)
- 섹션별 적절한 간격 설정

#### 2. Navigation 컴포넌트
**기능:**
- 고정 내비게이션 (position: fixed)
- 스크롤 시 배경 투명도 변경
- 반투명 배경 + blur 효과
- 부드러운 섹션 이동 (smooth scroll)

**섹션:**
- Main
- Gallery
- 오시는 길
- 축하말

#### 3. IntroSection 컴포넌트
**구성:**
- 메인 타이틀: "지수 🫶 유신"
- 서브 타이틀: "봄날의 정원 속, 우리의 약속"
- 결혼식 날짜 (임시: 2025년 00월 00일)
- 하트 이모지 애니메이션 (heartbeat)
- 페이드인 효과

#### 4. MainSection 컴포넌트
**구성:**
- 커플 사진 플레이스홀더 (3:4 비율)
- "우리 결혼합니다" 메시지
- 부모님 성함 (임시 데이터)
- 신랑/신부 이름
- 예식 안내 정보

**스타일:**
- 카드형 레이아웃
- 그라데이션 플레이스홀더 이미지
- 여백 충분한 심플한 디자인

#### 5. GallerySection 컴포넌트 ✨ 특별 기능
**구성:**
- 3x3 그리드 레이아웃 (9개 이미지)
- 임시 플레이스홀더 이미지

**전체화면 모달 기능:**
- 이미지 클릭 시 전체화면 모달 오픈
- 상단 X 버튼으로 닫기
- 좌우 화살표 버튼으로 이미지 네비게이션
- 키보드 지원 (←, →, ESC)
- 이미지 카운터 표시 (1/9, 2/9...)
- 다크 배경 (rgba(0, 0, 0, 0.95))

**반응형:**
- 모바일에서 버튼 크기 조정
- 터치 친화적인 UI

#### 6. MapSection 컴포넌트
**구성:**
- 지도 플레이스홀더
- 카카오맵/네이버지도 바로가기 버튼
- 주소 및 교통 정보
- 계좌번호 복사 기능

**계좌번호 복사 기능:**
- 클립보드 API 사용
- 구형 브라우저 fallback 지원
- "복사됨 💐" 피드백 (2초간 표시)
- 신랑/신부 계좌 구분

#### 7. MessageBoard 컴포넌트
**구성:**
- 축하 메시지 작성 폼 (이름, 관계, 메시지)
- 관계별 필터 (전체, 가족, 친구, 동료, 기타)
- 카드형 메시지 리스트
- 임시 더미 데이터

**TODO:**
- Phase 4에서 Supabase 실시간 연동 예정

#### 8. Footer 컴포넌트
**구성:**
- 카카오톡 공유 버튼 (노란색)
- 마무리 메시지
- 커플 서명
- 저작권 정보

**TODO:**
- Phase 3에서 카카오톡 공유 기능 구현 예정

#### 9. PetalAnimation 컴포넌트
**기능:**
- Canvas 기반 꽃잎 애니메이션
- 20개의 꽃잎이 부드럽게 흩날림
- requestAnimationFrame 최적화
- 반응형 캔버스 크기 조정
- 봄바람 느낌의 자연스러운 모션

**특징:**
- 각 꽃잎마다 다른 속도, 크기, 회전
- 타원형 꽃잎 모양
- 분홍빛 색상 (#FADADD)
- pointer-events: none으로 클릭 방해 없음

---

## 🎯 현재 상태

### ✅ 완료
- [x] Phase 1: 프로젝트 세팅
- [x] Phase 2: UI 컴포넌트 개발
- [x] 갤러리 3x3 그리드 + 전체화면 모달 + 좌우 네비게이션

### ⏳ 진행 예정
- [ ] Phase 3: 인터랙션 기능 (카카오 공유 SDK 연동)
- [ ] Phase 4: Supabase 연동
- [ ] Phase 5: 최적화 & 배포

---

## 📝 개발 서버 실행

```bash
cd /Users/park/workspace/MyWedding
npm run dev
```

로컬 개발 서버가 실행되면 브라우저에서 확인 가능합니다.

---

---

### Phase 3: 인터랙션 기능 ✅

#### 1. Kakao SDK 연동
**구현 완료:**
- index.html에 Kakao SDK 스크립트 추가
- `utils/kakaoShare.js` 유틸리티 작성
- 환경 변수로 앱 키 관리 (VITE_KAKAO_APP_KEY)
- Footer 컴포넌트에서 공유 기능 연결

**기능:**
- Kakao.Share.sendDefault() 사용
- 모바일/웹 링크 자동 전환
- 커스텀 공유 템플릿 (타이틀, 설명, 이미지, 버튼)

#### 2. 클립보드 유틸리티
**구현 완료:**
- `utils/clipboard.js` 작성
- 최신 Clipboard API 사용
- 구형 브라우저 fallback 제공
- 계좌번호 포맷팅 지원

---

### Phase 4: Supabase 연동 ✅

#### 1. Supabase 클라이언트 설정
**파일:** `src/lib/supabase.js`
- createClient로 Supabase 인스턴스 생성
- 환경 변수 관리 (VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY)
- 설정 가능 여부 확인 함수 제공

#### 2. useMessages 훅 구현
**파일:** `src/hooks/useSupabase.js`

**기능:**
- `fetchMessages()`: 메시지 목록 가져오기 (최신순 정렬)
- `addMessage()`: 새 메시지 추가
- 실시간 구독 (Supabase Realtime Channels)
- 로딩/에러 상태 관리

**실시간 기능:**
```javascript
supabase
  .channel('messages_channel')
  .on('postgres_changes', { event: 'INSERT', ... })
  .subscribe()
```

#### 3. MessageBoard 컴포넌트 업데이트
**변경사항:**
- useMessages 훅 연동
- 로딩 상태 표시 ("메시지를 불러오는 중...")
- 에러 처리 UI
- 제출 중 상태 표시 (disabled 버튼)
- 실시간 메시지 업데이트

#### 4. SETUP_GUIDE.md 작성
**포함 내용:**
- Kakao Developers 앱 등록 가이드
- Supabase 프로젝트 생성 가이드
- messages 테이블 스키마
- RLS(Row Level Security) 정책 설정
- 환경 변수 설정 예시
- GitHub Pages 배포 가이드
- 이미지 준비 가이드

**messages 테이블 구조:**
```sql
CREATE TABLE messages (
  id BIGSERIAL PRIMARY KEY,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  name TEXT NOT NULL,
  relationship TEXT NOT NULL,
  message TEXT NOT NULL
);
```

---

---

### Phase 5: 최적화 & 배포 ✅

#### 1. LazyImage 컴포넌트 구현
**파일:** `src/components/LazyImage.jsx`

**기능:**
- IntersectionObserver API 사용
- 뷰포트 진입 시 이미지 로드
- 로딩 플레이스홀더 제공
- 페이드인 애니메이션

**사용 예시:**
```jsx
<LazyImage 
  src="/path/to/image.jpg" 
  alt="설명"
  placeholder={<span>Loading...</span>}
/>
```

#### 2. Vite 빌드 최적화
**vite.config.js 설정:**
- 코드 스플리팅 (manualChunks)
  - `react-vendor`: React 라이브러리
  - `supabase-vendor`: Supabase 라이브러리
- 청크 크기 경고 제한 조정
- 소스맵 비활성화 (프로덕션)
- 개발 서버 자동 오픈

#### 3. GitHub Actions CI/CD 구축
**파일:** `.github/workflows/deploy.yml`

**자동 배포 워크플로우:**
1. main 브랜치 push 감지
2. Node.js 20 환경 설정
3. 의존성 설치 (`npm ci`)
4. 환경 변수 주입 (GitHub Secrets)
5. 프로젝트 빌드
6. gh-pages 브랜치에 배포

**필요한 GitHub Secrets:**
- `VITE_KAKAO_APP_KEY`
- `VITE_SUPABASE_URL`
- `VITE_SUPABASE_ANON_KEY`

#### 4. .gitignore 업데이트
- `.env` 파일 제외 (보안)
- `dist` 폴더 제외
- `.Work`, `.Letter` 디렉토리는 커밋 허용

#### 5. README.md 작성
**포함 내용:**
- 프로젝트 소개
- 주요 기능 설명
- 기술 스택
- 시작하기 가이드
- 프로젝트 구조
- 커스터마이징 방법
- 배포 가이드
- 보안 주의사항

#### 6. robots.txt 생성
- 검색 엔진 크롤링 허용
- sitemap.xml 위치 명시

---

## ✅ 전체 완료 사항

### Phase 1 ✅
- [x] Vite + React 프로젝트 초기화
- [x] 폴더 구조 생성
- [x] package.json 설정
- [x] GitHub Pages 배포 스크립트

### Phase 2 ✅
- [x] 디자인 시스템 구축 (globals.css)
- [x] Navigation 컴포넌트
- [x] IntroSection 컴포넌트
- [x] MainSection 컴포넌트
- [x] GallerySection 컴포넌트 (3x3 + 모달 + 네비게이션)
- [x] MapSection 컴포넌트 (지도 + 계좌 복사)
- [x] MessageBoard 컴포넌트
- [x] Footer 컴포넌트
- [x] PetalAnimation 컴포넌트

### Phase 3 ✅
- [x] 꽃잎 애니메이션 (Canvas)
- [x] 스무스 스크롤 (Navigation)
- [x] 계좌 복사 (Clipboard API + Fallback)
- [x] 카카오톡 공유 (Kakao SDK)

### Phase 4 ✅
- [x] Supabase 클라이언트 설정
- [x] useMessages 훅 구현
- [x] 실시간 메시지 구독
- [x] MessageBoard 연동
- [x] SETUP_GUIDE.md 작성

### Phase 5 ✅
- [x] LazyImage 컴포넌트
- [x] Vite 빌드 최적화
- [x] GitHub Actions CI/CD
- [x] .gitignore 보안 설정
- [x] README.md 작성
- [x] robots.txt 생성

---

## 🎉 프로젝트 완료!

모든 Phase가 성공적으로 완료되었습니다!

### 🚀 다음 스텝 (사용자가 직접 수행)

1. **Kakao Developers 설정**
   - 앱 등록 및 JavaScript 키 발급
   - 플랫폼 도메인 등록
   - `.env` 파일에 키 추가

2. **Supabase 설정**
   - 프로젝트 생성 (Seoul 리전 권장)
   - messages 테이블 생성
   - RLS 정책 설정
   - `.env` 파일에 URL/Key 추가

3. **실제 데이터 교체**
   - [ ] 결혼식 날짜/시간
   - [ ] 예식장 정보
   - [ ] 부모님 성함
   - [ ] 계좌번호
   - [ ] 이미지 (커플 사진, 갤러리 9장, 썸네일)
   - [ ] 지도 좌표

4. **GitHub 설정**
   - 리포지토리 생성
   - GitHub Secrets 설정
   - main 브랜치 push

5. **배포**
   ```bash
   npm run deploy
   ```
   또는 GitHub Actions 자동 배포

---

## 📊 프로젝트 통계

- **총 컴포넌트:** 10개
- **총 Hook:** 1개 (useMessages)
- **총 유틸리티:** 2개 (kakaoShare, clipboard)
- **라이브러리:** 3개 (React, Supabase, Kakao SDK)
- **개발 기간:** 1일
- **라인 수:** 약 2000+ 라인

---

## 💡 개발 팁

### 로컬 개발
```bash
npm run dev
```
http://localhost:5173 에서 확인

### 프로덕션 빌드 미리보기
```bash
npm run build
npm run preview
```

### 환경 변수 확인
```bash
# .env 파일이 제대로 로드되는지 확인
console.log(import.meta.env)
```

---

## 🐛 알려진 이슈 & 해결방법

### 1. Kakao SDK 초기화 실패
**원인:** JavaScript 키가 설정되지 않음  
**해결:** `.env` 파일 확인 및 Kakao Developers 플랫폼 등록

### 2. Supabase 연결 실패
**원인:** URL 또는 Key가 잘못됨  
**해결:** Supabase 대시보드에서 정확한 값 복사

### 3. GitHub Pages 404 에러
**원인:** `vite.config.js`의 base URL 불일치  
**해결:** base URL을 실제 리포지토리명과 일치시키기

### 4. 환경 변수가 빌드에 포함되지 않음
**원인:** GitHub Actions에서 Secrets 미설정  
**해결:** Repository Settings → Secrets and variables → Actions에서 추가

---

## 🎨 커스터마이징 아이디어

### 색상 변경
`src/styles/globals.css`의 CSS 변수 수정:
```css
--point-pink: #YOUR_COLOR;
--point-green: #YOUR_COLOR;
```

### 폰트 변경
Google Fonts 또는 다른 폰트로 교체:
```css
--font-title-kr: 'Your Font', serif;
--font-body: 'Your Font', sans-serif;
```

### 섹션 추가/제거
`src/App.jsx`에서 원하는 컴포넌트 추가/제거

---

## 📝 체크리스트

### 배포 전 필수 확인사항
- [ ] `.env` 파일이 `.gitignore`에 포함되어 있는가?
- [ ] GitHub Secrets가 모두 설정되었는가?
- [ ] 실제 데이터로 교체했는가?
- [ ] 이미지가 모두 준비되었는가?
- [ ] 모바일에서 테스트했는가?
- [ ] Kakao SDK가 정상 작동하는가?
- [ ] Supabase 테이블이 생성되었는가?
- [ ] RLS 정책이 설정되었는가?

---

Made with 💕 by 20년차 프로 웹 개발자 AI Assistant

---

## 💡 참고사항

### GitHub Pages 배포 준비
현재 `vite.config.js`의 base URL이 `/MyWedding/`로 설정되어 있습니다.
실제 GitHub 리포지토리명과 일치하는지 확인 필요합니다.

배포 명령어:
```bash
npm run deploy
```

### 실제 데이터 교체 필요
다음 항목들은 실제 데이터로 교체가 필요합니다:
- 결혼식 날짜 및 시간
- 예식장 정보 (이름, 주소)
- 부모님 성함
- 계좌번호
- 실제 사진 (갤러리, 커플 사진)
- 지도 좌표/주소
- 카카오톡 공유용 썸네일 이미지

---

## 🎨 구현된 기능 하이라이트

1. **반응형 디자인** - 모든 모바일 기기 대응
2. **부드러운 애니메이션** - 페이드인, 하트비트, 꽃잎 흩날림
3. **사용자 친화적 UI** - 직관적인 내비게이션, 명확한 피드백
4. **접근성 고려** - aria-label, 키보드 네비게이션 지원
5. **최적화** - requestAnimationFrame, lazy loading 준비

